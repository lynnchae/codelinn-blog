function likeIt(a,b,c){$.ajax({url:"/blog/likeIt",data:{id:a},type:"post",dataType:"text",success:function(){$("#alert-success").fadeIn(1e3,function(){var d=b+1;c.outerHTML='<a href="javascript:;" onclick="javascript:likeIt('+a+","+d+',this)"><i class="icon flaticon-like-heart">Likes ('+d+")</i></a>",$("#alert-success").fadeOut(500)})}})}function tagIt(a){$.ajax({url:"/blog/tagIt",data:{tag:a},type:"post",dataType:"text",success:function(a){var b,c,d,e,f;for($("#blog-outline").html(""),b=JSON.parse(a),c="",d=0;d<b.length;d++)e=b[d],console.info(e),f='<div class="single-blog-post">\n    <div class="image-box"></div>\n    <div class="post-meta-box bg-box">\n        <ul class="author-meta clearfix">\n            <li class="tag"><a href="#">'+e.tags+"</a></li>\n"+'            <li class="date"><a href="#">'+e.createTime+"</a>\n"+"            </li>\n"+"        </ul>\n"+'        <h6 class="title"><a href="/blog/'+e.id+'/b">'+e.title+"</a></h6>\n"+'        <ul class="share-meta clearfix">\n'+'        <li><i class="icon flaticon-comment"> 评论 ('+e.comments+")</i></li>"+'            <li><a href="javascript:;" onclick="javascript:likeIt('+e.id+","+e.likes+',this)"><i class="icon flaticon-like-heart"> 赞 ('+e.likes+")</i></a></li>\n"+"        </ul>\n"+"    </div> \n"+"</div>",c+=f;$("#blog-outline").html(c)}})}function wechat(){$(".wechat-block").slideToggle()}function setCookie(a,b,c){var d=getsec(c),e=new Date;e.setTime(e.getTime()+1*d),document.cookie=a+"="+escape(b)+";expires="+e.toGMTString()+";path=/;domain="+document.domain}function getCookie(a){var b,c=new RegExp("(^| )"+a+"=([^;]*)(;|$)");return(b=document.cookie.match(c))?unescape(b[2]):null}function getsec(a){var b=1*a.substring(1,a.length),c=a.substring(0,1);return"s"==c?1e3*b:"h"==c?1e3*60*60*b:"d"==c?1e3*60*60*24*b:void 0}function sendComment(a,b){var c=new FormData(a.parentNode),d=!0;$(a.parentNode).find("[required='true']").each(function(){if(""==$(this).val().trim())return $(this).focus(),d=!1,void 0;var a=$(this).attr("name");return"comment"==a&&$(this).val().trim().length>500?($(this).focus(),d=!1,void 0):void 0}),b&&c.set("replyTo",""),d&&(setCookie("commenter",c.get("commenter"),"d30"),setCookie("commenterEmail",c.get("commenterEmail"),"d30"),$.ajax({url:"/comment/sendComment",type:"post",data:c,processData:!1,contentType:!1,success:function(d){var f,g,h,i,e=$(a).parent().parent().parent();b?(h='  <div class="single-comment" >\n    <div class="comment">\n    <h6><div class="head-div"><img class="head-img" src="'+d.data+'"></div><div><a>'+c.get("commenter")+'</a><b class="date" >|'+(new Date).Format("yyyy-MM-dd HH:mm")+"</b></div></h6>\n"+"    <p >"+c.get("comment")+"</p>\n"+'    <button class="reply">回复</button>\n'+'    <div class="comment-form">\n'+'        <form method="post" class="comment-form-validation" autocomplete="off">\n'+'            <input type="text" required="true" placeholder="Name*" name="commenter" value="'+c.get("commenter")+'" >\n'+'            <input type="text" placeholder="Email" name="commenterEmail" value="'+c.get("commenterEmail")+'">\n'+'            <p><textarea required="true" placeholder="500字以内评论" name="comment"></textarea></p>\n'+'            <input type="text" hidden name="blogId" value="'+c.get("blogId")+'">\n'+'            <input type="text" hidden name="replyTo" value="'+c.get("commenter")+'">\n'+'            <input type="text" hidden name="parentId" vaue="0">\n'+'            <div class="comment-bar">\n'+"               <ul>\n"+'                   <li class="comment-emoji">😂</li>\n'+'                   <li class="comment-emoji">😫</li>\n'+'                   <li class="comment-emoji">😭</li>\n'+'                   <li class="comment-emoji">🤣</li>\n'+'                   <li class="comment-emoji">😅</li>\n'+'                   <li class="comment-emoji">😣</li>\n'+'                   <li class="comment-emoji">😍</li>\n'+'                   <li class="comment-emoji">🤗</li>\n'+'                   <li class="comment-emoji">😜</li>\n'+'                   <li class="comment-emoji">👍</li>\n'+'                   <li class="comment-emoji">👎</li>\n'+"               </ul>\n"+"            </div>"+'            <button type="button"  class="theme-button-one" onclick="javascript:sendComment(this,false)"    style="margin-bottom: 20px; margin-left: 10px">提交</button>\n'+"        </form>\n"+"    </div>\n"+"  </div>",i='<div class="comment-meta">'+h+"</div>",$(".comment-area").append($(i))):(f='<h6><div class="head-div"><img class="head-img" src="'+d.data+'"></div>'+"<div><a>"+c.get("commenter")+'</a><b class="date" >|'+(new Date).Format("yyyy-MM-dd HH:mm")+"</b></div></h6>\n"+"   <p><strong>@"+c.get("replyTo")+"</strong> "+c.get("comment")+"</p>\n"+'   <button class="reply">回复</button>\n'+'   <div class="comment-form">\n'+'   <form method="post" class="comment-form-validation" autocomplete="off">\n'+'       <input type="text" required="true" placeholder="Name*" name="commenter" value="'+c.get("commenter")+'">\n'+'       <input type="text" placeholder="Email" name="commenterEmail" value="'+c.get("commenterEmail")+'" >\n'+'       <input type="text" hidden name="blogId" value="'+c.get("blogId")+'">\n'+'       <input type="text" hidden name="replyTo" th:value="'+c.get("replyTo")+'">\n'+'       <input type="text" hidden name="parentId" th:value="'+c.get("parentId")+'">\n'+'       <p><textarea  required="true" placeholder="500字以内评论" name="comment"></textarea></p>\n'+'       <div class="comment-bar">\n'+"          <ul>\n"+'              <li class="comment-emoji">😂</li>\n'+'              <li class="comment-emoji">😫</li>\n'+'              <li class="comment-emoji">😭</li>\n'+'              <li class="comment-emoji">🤣</li>\n'+'              <li class="comment-emoji">😅</li>\n'+'              <li class="comment-emoji">😣</li>\n'+'              <li class="comment-emoji">😍</li>\n'+'              <li class="comment-emoji">🤗</li>\n'+'              <li class="comment-emoji">😜</li>\n'+'              <li class="comment-emoji">👍</li>\n'+'              <li class="comment-emoji">👎</li>\n'+"          </ul>\n"+"       </div>"+'       <button type="button"  class="theme-button-one" onclick="javascript:sendComment(this,false)"   style="margin-bottom: 20px; margin-left: 10px">提交</button>\n'+"   </form>\n"+" </div>",g='<div class="reply-comment">'+f+"</div>",$(e).parent().append($(g))),b?$(".comment-bottom-area").find("textarea").val(""):($(a).parent().parent().toggle(500,function(){}),a.parentNode.reset()),$(".reply").length>0&&$(".reply").each(function(){$._data(this,"events")||$(this).on("click",function(){$(this).parent().find(".comment-form").toggle(500,function(){})})}),$(".comment-emoji").each(function(){$._data(this,"events")||$(this).on("click",function(){var a=$(this).parent().parent().parent().find("textarea"),b=a.val()+$(this).html();a.val(b)})})},error:function(a){var b=JSON.parse(a.responseText);$(".comment-form-validation").fadeTo("slow",1,function(){$("#alert-error").find("p").html(b.message),$("#alert-error").fadeIn()})}}))}!function(a){"use strict";a(document).ready(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;a(window).scroll(function(){var b=a(".theme-main-header"),c=a(window).scrollTop();a(".back-to-home"),c>=100?b.addClass("fixed"):b.removeClass("fixed")}),a("input,textarea").each(function(){a(this).data("holder",a(this).attr("placeholder")),a(this).on("focusin",function(){a(this).attr("placeholder","")}),a(this).on("focusout",function(){a(this).attr("placeholder",a(this).data("holder"))})}),a(window).on("scroll",function(){a(this).scrollTop()>200?a(".scroll-top").fadeIn():a(".scroll-top").fadeOut()}),a(".scroll-top").on("click",function(){return a("html, body").animate({scrollTop:0},1500),!1}),b=(new Date).getHours(),d="Good morning",e="Good afternoon",f="Good evening",b>=0&&12>b?c=d:b>=12&&17>b?c=e:b>=17&&24>b&&(c=f),a(".greeting").append(c),g=a("#search-button"),h=a("#searchWrapper"),i=a("#close-button"),g.length&&(g.on("click",function(){h.addClass("show-box"),a(".main-page-wrapper").addClass("blury-bg")}),i.on("click",function(){h.removeClass("show-box"),a(".main-page-wrapper").removeClass("blury-bg")})),j=a(".switch-menu"),j.length&&(a(".switch-btn button").on("click",function(){a(".switcher").toggleClass("switcher-show")}),a("#styleOptions").styleSwitcher({hasPreview:!0,fullPath:"css/",cookie:{expires:4e4,isManagingLoad:!0}})),k=a(".easyTicker"),k.length&&k.easyTicker({direction:"up",easing:"easeInOutCirc",speed:"slow",interval:3e3,height:"auto",visible:1,mousePause:1}),l=a("#mega-menu-holder"),l.length&&l.slimmenu({resizeWidth:"767",animSpeed:"medium",indentChildren:!0}),m=a(".embed-video"),m.length&&m.fitVids(),a("#main-slider-one").length&&(n=new MasterSlider,n.setup("main-slider-one",{width:1700,height:650,minHeight:0,space:0,start:1,grabCursor:!0,swipe:!1,mouse:!0,keyboard:!0,layout:"fullwidth",wheel:!1,autoplay:!0,instantStartLayers:!0,loop:!0,shuffle:!1,preload:0,heightLimit:!0,autoHeight:!1,smoothHeight:!0,endPause:!1,overPause:!1,fillMode:"fill",centerControls:!0,startOnAppear:!1,layersMode:"center",autofillTarget:"",hideLayers:!1,fullscreenMargin:0,speed:10,dir:"h",parallaxMode:"swipe",view:"fade"})),o=a(".main-banner-slider-two"),o.length&&o.owlCarousel({loop:!0,nav:!0,navText:["<i class='flaticon-left-arrow'></i>","<i class='flaticon-right-arrow'></i>"],dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!0,smartSpeed:1100,lazyLoad:!0,items:1}),o=a(".main-banner-slider-three"),o.length&&o.owlCarousel({loop:!0,nav:!1,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!0,smartSpeed:1100,lazyLoad:!0,centerItem:!0,center:!0,responsive:{0:{items:1},576:{items:2},992:{items:3},1300:{items:4}}}),p=a(".related-blog-slider"),p.length&&p.owlCarousel({loop:!0,nav:!1,dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!0,smartSpeed:1100,lazyLoad:!0,responsive:{0:{items:1},500:{items:2},992:{items:3}}}),q=a(".blog-image-slider"),q.length&&q.owlCarousel({loop:!0,nav:!0,navText:["<i class='flaticon-left-arrow'></i>","<i class='flaticon-right-arrow'></i>"],dots:!1,autoplay:!0,autoplayTimeout:4e3,autoplayHoverPause:!0,smartSpeed:1100,lazyLoad:!0,items:1}),r=a(".fancybox"),r.length&&r.fancybox({arrows:!0,animationEffect:"zoom-in-out",transitionEffect:"zoom-in-out"}),a(".form-validation").length&&a(".form-validation").validate({rules:{name:{required:!0},email:{required:!0},message:{required:!0}},submitHandler:function(b){a(b).ajaxSubmit({success:function(){a(".form-validation :input").attr("disabled","disabled"),a(".form-validation").fadeTo("slow",1,function(){a(this).find(":input").attr("disabled","disabled"),a(this).find("label").css("cursor","default"),a("#alert-success").fadeIn()})},error:function(b){var c=JSON.parse(b.responseText);a(".form-validation").fadeTo("slow",1,function(){a("#alert-error").find("p").html(c.message),a("#alert-error").fadeIn()})}})}}),a(".comment-emoji").each(function(){a(this).on("click",function(){var b=a(this).parent().parent().parent().find("textarea"),c=b.val()+a(this).html();b.val(c)})}),s=a(".closeAlert"),s.length&&(s.on("click",function(){a(".form-validation :input").removeAttr("disabled"),a(".form-validation :button").removeAttr("disabled"),a(".alert-wrapper").fadeOut();var b=a(this).parent().attr("id");"success"==b&&(a("#blogdetail").length?window.location.reload():window.location.href="/")}),s.on("click",function(){a(".form-validation :input").removeAttr("disabled"),a(".form-validation :button").removeAttr("disabled"),a(".alert-wrapper").fadeOut()})),s=a(".closeAlert"),s.length&&(s.on("click",function(){a(".comment-form-validation :input").removeAttr("disabled"),a(".comment-form-validation :button").removeAttr("disabled"),a(".alert-wrapper").fadeOut();var b=a(this).parent().attr("id");"success"==b&&(a("#blogdetail").length?window.location.reload():window.location.href="/")}),s.on("click",function(){a(".comment-form-validation :input").removeAttr("disabled"),a(".comment-form-validation :button").removeAttr("disabled"),a(".alert-wrapper").fadeOut()})),a("input[name=commenter]").val(getCookie("commenter")),a("input[name=commenterEmail]").val(getCookie("commenterEmail")),a(".reply").click(function(){a(this).parent().find(".comment-form").toggle(500,function(){})})}),a(window).load(function(){a("#loader").fadeOut(),a("#loader-wrapper").delay(350).fadeOut("slow"),a("body").delay(350).css({overflow:"visible"}),a(".blog-masonry").length&&a(".blog-masonry").masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",percentPosition:!0})}),Date.prototype.Format=function(a){var c,b={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(c in b)new RegExp("("+c+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?b[c]:("00"+b[c]).substr((""+b[c]).length)));return a}}(jQuery);