!function(a){var b={defaults:{width:"50%",size:"medium",themes:[],placeholder:"Select an item",removable:!1,empty:!1,search:!1,ajax:!1,data:{},scrollContainer:null},setup:function(c){var d=Object.keys(this.defaults),e=Object.keys(c),f=!0;e.forEach(function(b){-1===a.inArray(b,d)&&(console.error("selectMania | wrong setup settings"),f=!1)}),f&&(this.defaults=a.extend(!0,{},b.defaults,c))}},c={internalSettings:function(a,b){return b.multiple=!1,b.values=[],b.multiple=a.is("[multiple]"),b.disabled=a.is("[disabled]"),a.find("option:selected").each(function(){b.values.push({value:this.value,text:this.text})}),b},getAttrSettings:function(a){var b={},c=["width","size","placeholder","removable","empty","search","scrollContainer"];return c.forEach(function(c){if(a.is("[data-"+c+"]")){var d=a.attr("data-"+c);("true"===d||"false"===d)&&(d="true"===d),b[c]=d}}),b},initialize:function(b,c){var i,f=this,g=a.extend(!0,{},c),h=f.getAttrSettings(b);g=a.extend(g,h),g.empty&&b.val(""),g=f.internalSettings(b,g),f.controlSettings(b,g)&&(i=d.build(b,g),i.data("selectMania-originalSelect",b),b.data("selectMania-element",i),g.ajax!==!1&&f.initAjax(i,g),f.updateClean(i),b.addClass("select-mania-original"),i.insertBefore(b),b.appendTo(i),e.bind(i))},update:function(b){var c=this;$selectManiaEl=b.data("selectMania-element"),$valueList=$selectManiaEl.find(".select-mania-values").first(),$itemList=$selectManiaEl.find(".select-mania-items").first(),b.is("[disabled]")?$selectManiaEl.addClass("select-mania-disabled"):$selectManiaEl.removeClass("select-mania-disabled"),$selectManiaEl.find(".select-mania-value").remove(),$itemList.empty(),b.find("option:selected").each(function(){a(this).is(":selected")&&$valueList.append(d.buildValue({value:this.value,text:this.text}))}),$itemList.append(d.buildItemList(b.children())),c.updateClean($selectManiaEl),e.bind($selectManiaEl)},destroy:function(a){$selectManiaEl=a.data("selectMania-element"),a.insertAfter($selectManiaEl),$selectManiaEl.remove(),a.removeClass("select-mania-original")},openDropdown:function(b){var g,d=this,f=b.closest(".select-mania");f.is("[data-selectMania-scrollContainer]")&&(g=a(f.attr("data-selectMania-scrollContainer")),c.positionDropdown(b),b.addClass("select-mania-absolute"),g.off("scroll.selectMania").on("scroll.selectMania",function(){g.off("scroll.selectMania"),c.closeDropdown(a(".select-mania-dropdown.open"))}),a(window).off("resize.selectMania").on("resize.selectMania",function(){c.positionDropdown(b)})),b.stop().addClass("open").slideDown(100),b.find(".select-mania-items").scrollTop(0),d.focusSearch(b),a(document).off("keydown.selectMania").on("keydown.selectMania",e.keyboardControl)},closeDropdown:function(b){var d,e,c=b.data("selectMania-element");a(document).off("keydown.selectMania"),b.find(".select-mania-item").removeClass("select-mania-hover"),b.hasClass("select-mania-absolute")?(d=b.data("selectMania-element").find(".select-mania-inner").first(),b.removeClass("open").hide().insertAfter(d),a(window).off("resize.selectMania"),e=a(c.attr("data-selectMania-scrollContainer")),e.length>0&&e.off("scroll.selectMania")):b.stop().removeClass("open").slideUp(100)},positionDropdown:function(a){var b=a.data("selectMania-element"),c=a.find(".select-mania-items"),d=c.scrollTop(),e=b.offset(),f=b.outerWidth(),g=b.outerHeight();a.appendTo("body").css({position:"absolute",top:e.top+g,left:e.left,width:f}),c.scrollTop(d)},selectItem:function(a){var h,i,b=a.closest(".select-mania-dropdown"),f=b.data("selectMania-element"),g=f.data("selectMania-originalSelect");a.is(".select-mania-selected")||(h=a.attr("data-value"),i=d.buildValue({value:h,text:a.text()}),f.is(".select-mania-multiple")?(f.find(".select-mania-values").append(i),c.addMultipleVal(g,h)):(b.find(".select-mania-item").removeClass("select-mania-selected"),f.find(".select-mania-values .select-mania-value").remove(),f.find(".select-mania-values").append(i),g.val(h)),a.addClass("select-mania-selected"),g.trigger("change")),b.is(".select-mania-absolute")&&c.positionDropdown(b),f.is(".select-mania-multiple")||c.closeDropdown(b),c.updateClean(f),e.bind(f)},focusSearch:function(a){a.find(".select-mania-search-input").focus()},addMultipleVal:function(a,b){var c=a.val();c instanceof Array||(c=[]),c.push(b),a.val(c)},removeMultipleVal:function(b,c){var d=b.val();d instanceof Array||(d=[]),d.splice(a.inArray(c,d),1),b.val(d)},updateClean:function(a){var b=a.data("selectMania-originalSelect");null!==b.val()&&b.val().length>0?a.find(".select-mania-clear-icon").show():a.find(".select-mania-clear-icon").hide()},doSearch:function(b){var c=b.data("selectMania-dropdown"),d=c.find(".select-mania-search-input").first().val();return d=d.toLowerCase().trim(),""===d?(c.find(".select-mania-group, .select-mania-item").removeClass("select-mania-hidden"),void 0):(c.find(".select-mania-item").each(function(){-1!==a(this).text().toLowerCase().indexOf(d)?a(this).removeClass("select-mania-hidden"):a(this).addClass("select-mania-hidden")}),c.find(".select-mania-group").each(function(){a(this).find(".select-mania-item:not(.select-mania-hidden)").length>0?a(this).removeClass("select-mania-hidden"):a(this).addClass("select-mania-hidden")}),void 0)},doSearchAjax:function(a){var g,h,b=this,d=a.data("selectMania-dropdown"),f=d.find(".select-mania-search-input").first().val();a.data("selectMania-ajaxReady",!1),a.data("selectMania-ajaxPage",1),b.dropdownLoading(a),g=a.data("selectMania-ajaxFunction"),h=a.data("selectMania-ajaxData"),g(f,1,h,function(d){b.dropdownLoading(a,!0),c.replaceItems(a,d),e.bind(a),b.initAjax(a)})},addItems:function(a,b){var c=this;c.addOrReplaceItems(a,b,!1)},replaceItems:function(a,b){var c=this;c.addOrReplaceItems(a,b,!0)},addOrReplaceItems:function(b,c,f){var g=this,h=b.data("selectMania-dropdown"),i=b.data("selectMania-originalSelect"),j=h.find(".select-mania-items"),k=a(c),l=g.getVal(b);l.forEach(function(b){k.filter(function(){return a(this).attr("value")===b.value&&a(this).text()===b.text}).prop("selected",!0)}),$builtItems=d.buildItemList(k),f===!0&&(i.find("option").remove(":not(:checked)"),j.empty()),j.append($builtItems),i.append(k),e.bind(b)},initAjax:function(a,b){"object"==typeof b&&(b.hasOwnProperty("ajax")&&"function"==typeof b.ajax&&a.data("selectMania-ajaxFunction",b.ajax),b.hasOwnProperty("data")&&"object"==typeof b.data&&a.data("selectMania-ajaxData",b.data)),a.data("selectMania-ajaxPage",1),a.data("selectMania-ajaxReady",!0),a.data("selectMania-ajaxScrollDone",!1)},dropdownLoading:function(b,c){var e,d=!1;"undefined"!=typeof c&&c===!0&&(d=!0),$dropdownContainer=b.find(".select-mania-items-container").first(),$dropdownContainer.find(".icon-loading-container").remove(),d!==!0&&(e=a('<div class="icon-loading-container"></div>'),e.append('<i class="icon-loading"></i>'),$dropdownContainer.append(e))},getVal:function(b){var c=[];return b.find(".select-mania-value").each(function(){var b=a(this).find(".select-mania-value-text").first().text();c.push({value:a(this).attr("data-value"),text:b})}),c},clear:function(a){var c,b=a.data("selectMania-dropdown");a.find(".select-mania-value").remove(),b.find(".select-mania-item").removeClass("select-mania-selected"),c=a.data("selectMania-originalSelect"),a.is(".select-mania-multiple")?c.val([]):c.val("")},setVal:function(b,c){var d=this,f=b.data("selectMania-originalSelect");d.clear(b),c.length>1&&!b.is(".select-mania-multiple")&&(c=c.slice(0,1)),c.forEach(function(c){var e=a.extend({value:"",text:"",selected:!0},c);d.setOneValSelectMania(b,e),d.setOneValOriginal(f,e)}),d.updateClean(b),e.bind(b)},setOneValSelectMania:function(b,c){var f,e=d.buildValue(c);b.find(".select-mania-values").append(e),f=b.find('.select-mania-item[data-value="'+c.value+'"]').filter(function(){return a(this).text()===c.text}),f.length>0&&f.first().addClass("select-mania-selected")},setOneValOriginal:function(b,c){var f,g,e=b.find('option[value="'+c.value+'"]').filter(function(){return a(this).text()===c.text});e.length<1?(f=d.buildOption(c),b.append(f)):(g=e.first(),g[0].selected=!0)},controlTarget:function(b,c){return-1===a.inArray("isSelect",c)||b.is("select")?-1===a.inArray("isInitialized",c)||b.hasClass("select-mania-original")?-1!==a.inArray("notInitialized",c)&&b.hasClass("select-mania-original")?(console.error("selectMania | ignore because already initialized"),console.log(b[0]),!1):-1!==a.inArray("isSingle",c)&&b.length>1?(console.error("selectMania | check method can be called on single element only"),console.log(b[0]),!1):!0:(console.error("selectMania | select is not initialized"),console.log(b[0]),!1):(console.error("selectMania | invalid select element"),console.log(b[0]),!1)},controlSettings:function(b,c){return c.ajax!==!1&&"function"!=typeof c.ajax?(c.ajax=!1,console.error("selectMania | invalid ajax function"),console.log(b[0]),console.log(c),!1):-1===a.inArray(c.size,["tiny","small","medium","large"])?(c.size="medium",console.error("selectMania | invalid size"),console.log(b[0]),console.log(c),!1):null!==c.scrollContainer&&a(c.scrollContainer).length<1?(c.scrollContainer=null,console.error("selectMania | invalid scroll container"),console.log(b[0]),console.log(c),!1):!0},controlValues:function(a,b){return b instanceof Array?!0:(console.error("selectMania | values parameter is not a valid array"),console.log(a[0]),console.log(b),!1)},navigateItem:function(b,c){var g,h,i,j,k,l,m,d=b.closest(".select-mania"),e=b.find(".select-mania-items"),f=".select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden)";d.hasClass("select-mania-multiple")&&(f+=":not(.select-mania-selected)"),g=b.find(f),h=b.find(f+".select-mania-hover"),i=a(),h.length>0?"next"===c?i=g.slice(g.index(h)+1).first():"previous"===c&&(i=g.slice(0,g.index(h)).last()):i=g.first(),i.length>0&&(b.find(".select-mania-item").removeClass("select-mania-hover"),i.addClass("select-mania-hover"),j=i.position(),k=i.outerHeight(!0),l=e.height(),m=e.scrollTop(),j.top<0?e.scrollTop(m+j.top):j.top+k>l&&e.scrollTop(m+j.top+k-l))}},d={build:function(b,c){var h,i,d=this,e="select-mania-"+c.size,f='style="width:'+c.width+';"',g=a('<div class="select-mania '+e+'" '+f+"></div>");return c.multiple&&g.addClass("select-mania-multiple"),c.disabled&&g.addClass("select-mania-disabled"),c.themes instanceof Array&&c.themes.length>0&&c.themes.forEach(function(a){g.addClass("select-mania-theme-"+a)}),c.ajax!==!1&&g.addClass("select-mania-ajax"),null!==c.scrollContainer&&g.attr("data-selectMania-scrollContainer",c.scrollContainer),h=d.buildInner(c),i=d.buildDropdown(b,c),g.append(h).append(i),g.data("selectMania-dropdown",i),i.data("selectMania-element",g),g},buildInner:function(b){var g,c=this,d=a('<div class="select-mania-inner"></div>'),e=a('<div class="select-mania-values"></div>'),f=a('<div class="select-mania-placeholder">'+b.placeholder+"</div>");return e.append(f),b.values.forEach(function(a){e.append(c.buildValue(a))}),d.append(e),g=a('<div class="select-mania-clear"></div>'),(b.removable||b.multiple)&&g.append('<i class="select-mania-clear-icon icon-cross">'),d.append(g),d.append(a('<div class="select-mania-arrow"><i class="select-mania-arrow-icon icon-arrow-down"></i></div>')),d},buildValue:function(b){var c='<div class="select-mania-value" data-value="'+b.value+'">'+'<div class="select-mania-value-text">'+b.text+"</div>"+'<div class="select-mania-value-clear">'+'<i class="select-mania-value-clear-icon icon-cross"></i>'+"</div>"+"</div>";return a(c)},buildOption:function(b){var c=a('<option value="'+b.value+'">'+b.text+"</option>");return c[0].selected=b.selected,c},buildDropdown:function(b,c){var g,h,i,d=this,e="select-mania-"+c.size,f=a('<div class="select-mania-dropdown '+e+'"></div>');return c.search&&(g=a('<div class="select-mania-dropdown-search"></div>'),g.append('<input class="select-mania-search-input" />'),f.append(g)),h=a('<div class="select-mania-items-container"></div>'),i=a('<div class="select-mania-items"></div>'),i.append(d.buildItemList(b.children())),h.append(i),f.append(h),c.themes instanceof Array&&c.themes.length>0&&c.themes.forEach(function(a){f.addClass("select-mania-theme-"+a)}),f},buildItemList:function(b){var c=this;return $itemList=a(),b.each(function(){a(this).is("optgroup")?$itemList=$itemList.add(c.buildItemGroup(a(this))):a(this).is("option")&&($itemList=$itemList.add(c.buildItem(a(this))))}),$itemList},buildItemGroup:function(b){var d,e,f,c=this;return $group=a('<div class="select-mania-group"></div>'),d=a('<div class="select-mania-group-inner"></div>'),e=a('<div class="select-mania-group-title"></div>'),b.is("[data-icon]")&&e.append('<div class="select-mania-group-icon"><i class="'+b.attr("data-icon")+'"></i></div>'),e.append('<div class="select-mania-group-text">'+b.attr("label")+"</div>"),$group.append(e),f=b.is(":disabled"),f&&$group.addClass("select-mania-disabled"),b.find("option").each(function(){d.append(c.buildItem(a(this),f))}),$group.append(d),$group},buildItem:function(b,c){var d=b[0],e=a('<div class="select-mania-item" data-value="'+d.value+'"></div>');return b.is("[data-icon]")&&e.append('<div class="select-mania-item-icon"><i class="'+b.attr("data-icon")+'"></i></div>'),e.append('<div class="select-mania-item-text">'+d.text+"</div>"),(b.is(":disabled")||f.def(c)===!0)&&e.addClass("select-mania-disabled"),b.is(":selected")&&e.addClass("select-mania-selected"),e}},e={bind:function(b){var c=this,d=b.data("selectMania-originalSelect"),e=b.data("selectMania-dropdown");b.is(".select-mania-disabled")?(d.off("focus.selectMania"),d.off("blur.selectMania"),b.find(".select-mania-clear-icon").off("click.selectMania"),b.find(".select-mania-value-clear-icon").off("click.selectMania"),b.find(".select-mania-inner").off("click.selectMania"),e.find(".select-mania-item:not(.select-mania-disabled)").off("mouseenter.selectMania"),e.find(".select-mania-item:not(.select-mania-disabled)").off("click.selectMania"),e.find(".select-mania-search-input").off("input.selectMania"),e.find(".select-mania-items").off("wheel.selectMania"),e.find(".select-mania-items").off("scroll.selectMania")):(a(document).off("click.selectMania").on("click.selectMania",c.documentClick),d.off("focus.selectMania").on("focus.selectMania",c.focus),d.off("blur.selectMania").on("blur.selectMania",c.blur),b.find(".select-mania-clear-icon").off("click.selectMania").on("click.selectMania",c.clearValues),b.find(".select-mania-value-clear-icon").off("click.selectMania").on("click.selectMania",c.clearValue),b.find(".select-mania-inner").off("click.selectMania").on("click.selectMania",c.dropdownToggle),e.find(".select-mania-item:not(.select-mania-disabled)").off("mouseenter.selectMania").on("mouseenter.selectMania",c.hoverItem),e.find(".select-mania-item:not(.select-mania-disabled)").off("click.selectMania").on("click.selectMania",c.itemSelection),e.find(".select-mania-search-input").off("input.selectMania").on("input.selectMania",c.inputSearch),e.find(".select-mania-items").off("wheel.selectMania").on("wheel.selectMania",c.scrollControl),b.is(".select-mania-ajax")&&e.find(".select-mania-items").off("scroll.selectMania").on("scroll.selectMania",c.scrollAjax))},dropdownToggle:function(b){var d,e;b.stopPropagation(),d=a(this).closest(".select-mania"),e=d.data("selectMania-dropdown"),e.is(".open")?c.closeDropdown(e):(c.closeDropdown(a(".select-mania-dropdown.open")),c.openDropdown(e))},documentClick:function(b){a(b.target).closest(".select-mania-dropdown").length<1&&c.closeDropdown(a(".select-mania-dropdown.open"))},clearValues:function(b){var d,e,f;b.stopPropagation(),d=a(this).closest(".select-mania"),e=d.data("selectMania-dropdown"),f=d.data("selectMania-originalSelect"),c.clear(d),e.is(".select-mania-absolute")&&c.positionDropdown(e),f.trigger("change"),c.updateClean(d)},clearValue:function(b){var d,e,f,g;b.stopPropagation(),d=a(this).closest(".select-mania"),e=d.data("selectMania-dropdown"),f=a(this).closest(".select-mania-value"),e.find('.select-mania-item[data-value="'+f.attr("data-value")+'"]').removeClass("select-mania-selected"),f.remove(),g=d.data("selectMania-originalSelect"),c.removeMultipleVal(g,f.attr("data-value")),e.is(".select-mania-absolute")&&c.positionDropdown(e),g.trigger("change"),c.updateClean(d)},itemSelection:function(){var b=a(this);c.selectItem(b)},inputSearch:function(){var d,b=a(this);$selectManiaEl=b.closest(".select-mania-dropdown").data("selectMania-element"),d=200,$selectManiaEl.is(".select-mania-ajax")&&(d=400),clearTimeout(b.data("selectMania-searchTimer")),b.data("selectMania-searchTimer",setTimeout(function(){$selectManiaEl.is(".select-mania-ajax")?c.doSearchAjax($selectManiaEl):c.doSearch($selectManiaEl)},d))},scrollAjax:function(){var h,i,j,k,d=a(this),f=d.closest(".select-mania-dropdown"),g=f.data("selectMania-element");g.data("selectMania-ajaxScrollDone")!==!0&&d.scrollTop()>=d[0].scrollHeight-d.outerHeight()-12&&g.data("selectMania-ajaxReady")===!0&&(h=g.data("selectMania-ajaxPage")+1,i=g.find(".select-mania-search-input").first().val(),g.data("selectMania-ajaxReady",!1),g.data("selectMania-ajaxPage",h),c.dropdownLoading(g),j=g.data("selectMania-ajaxFunction"),k=g.data("selectMania-ajaxData"),j(i,h,k,function(a){c.dropdownLoading(g,!0),""!==a.trim()?(c.addItems(g,a),e.bind(g),g.data("selectMania-ajaxReady",!0)):g.data("selectMania-ajaxScrollDone",!0)}))},scrollControl:function(b){var c=a(this);return b.originalEvent.deltaY<0?c.scrollTop()>0:c.scrollTop()+c.innerHeight()<c[0].scrollHeight},focus:function(){var c=a(this),d=c.data("selectMania-element");d.addClass("select-mania-focused"),c.off("keydown.selectMania").on("keydown.selectMania",e.keyboardOpening)},blur:function(){var c=a(this),d=c.data("selectMania-element");d.removeClass("select-mania-focused"),c.off("keydown.selectMania")},hoverItem:function(){var c=a(this),d=c.closest(".select-mania-dropdown");d.find(".select-mania-item").removeClass("select-mania-hover"),c.addClass("select-mania-hover")},keyboardOpening:function(b){var d=a(this),e=d.data("selectMania-element"),f=e.data("selectMania-dropdown"),g=[13,32,37,38,39,40];f.hasClass("open")||-1===a.inArray(b.keyCode,g)||(b.preventDefault(),b.stopPropagation(),d.blur(),c.openDropdown(f))},keyboardControl:function(b){var f,d=a(".select-mania-dropdown.open").first(),e=[9,13,27,38,40];if(d.length>0&&-1!==a.inArray(b.keyCode,e))switch(b.preventDefault(),b.stopPropagation(),b.keyCode){case 13:f=d.find(".select-mania-item:not(.select-mania-disabled):not(.select-mania-hidden).select-mania-hover").first(),f.length>0&&c.selectItem(f);break;case 9:case 27:c.closeDropdown(d);break;case 38:c.navigateItem(d,"previous");break;case 40:c.navigateItem(d,"next")}}},f={def:function(a){return"undefined"==typeof a?null:a}},g={init:function(d){var e=a.extend(!0,{},b.defaults,d);return this.each(function(){var b=a(this);c.controlTarget(b,["isSelect","notInitialized"])&&c.initialize(b,e)})},update:function(){return this.each(function(){var b=a(this);c.controlTarget(b,["isInitialized"])&&c.update(b)})},destroy:function(){return this.each(function(){var b=a(this);c.controlTarget(b,["isInitialized"])&&c.destroy(b)})},check:function(){return c.controlTarget(this,["isSingle"])?this.hasClass("select-mania-original"):void 0},get:function(){if(c.controlTarget(this,["isSingle","isInitialized"])){var a=this.data("selectMania-element");return c.getVal(a)}},set:function(a){if(c.controlTarget(this,["isSingle","isInitialized"])&&c.controlValues(this,a)){var b=this.data("selectMania-element");c.setVal(b,a)}},clear:function(){return this.each(function(){var d,b=a(this);c.controlTarget(b,["isInitialized"])&&(d=b.data("selectMania-element"),c.clear(d),b.trigger("change"),c.updateClean(d))})},setup:function(){return this.each(function(){var d,b=a(this);c.controlTarget(b,["isInitialized"])&&(d=b.data("selectMania-element"),c.clear(d),b.trigger("change"),c.updateClean(d))})}};a.fn.selectMania=function(a){if(!(this.length<1)){if(g[a]){var b=Array.prototype.slice.call(arguments,1);return g[a].apply(this,b)}return"object"!=typeof a&&a?(console.error("selectMania | wrong method called"),console.log(this),void 0):g.init.apply(this,arguments)}},a.extend({selectManiaSetup:function(a){b.setup(a)}})}(jQuery);